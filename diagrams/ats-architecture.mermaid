%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#4F46E5', 'primaryTextColor': '#fff', 'primaryBorderColor': '#3730A3', 'lineColor': '#6366F1', 'secondaryColor': '#F0FDFA', 'tertiaryColor': '#EEF2FF'}}}%%

flowchart TB
    subgraph Clients["ğŸŒ Client Applications"]
        direction LR
        WebApp["ğŸ–¥ï¸ Web Application<br/>(React/Angular)"]
        MobileApp["ğŸ“± Mobile App<br/>(iOS/Android)"]
        ThirdParty["ğŸ”— Third-Party<br/>Integrations"]
    end

    subgraph IDP["ğŸ” Identity Provider"]
        IdPService["Identity Provider<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> External ID (B2C)<br/>â˜ï¸ <b>AWS:</b> Cognito<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Social Login (LinkedIn, Google)<br/>â€¢ Enterprise SSO (SAML/OIDC)<br/>â€¢ MFA Support<br/>â€¢ User Management"]
    end

    subgraph Gateway["ğŸšª API Gateway Layer"]
        GatewayService["API Gateway<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> API Management + Spring Cloud Gateway<br/>â˜ï¸ <b>AWS:</b> API Gateway + Spring Cloud Gateway<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>ğŸ”‘ Authentication & Authorization<br/>ğŸ”€ Routing & Load Balancing<br/>ğŸ“¦ Response Caching (Redis)<br/>âš¡ Rate Limiting<br/>ğŸ“„ OpenAPI Aggregation"]
    end

    subgraph Services["âš™ï¸ Microservices Layer"]
        direction TB
        
        subgraph BusinessServices["ğŸ“Š Business Domain Services"]
            direction LR
            CandidateSvc["ğŸ‘¤ Candidate Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Profile Management<br/>â€¢ Application Tracking<br/>â€¢ Candidate Search<br/>â€¢ Talent Pool"]
            RecruiterSvc["ğŸ‘” Recruiter Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Job Management<br/>â€¢ Pipeline Management<br/>â€¢ Interview Scheduling<br/>â€¢ Hiring Workflows"]
        end
        
        subgraph TechnicalServices["ğŸ”§ Technical Services"]
            direction LR
            TenantSvc["ğŸ¢ Tenant Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Tenant Provisioning<br/>â€¢ Schema Management<br/>â€¢ Tenant Isolation<br/>â€¢ Billing Integration"]
            DocMgmtSvc["ğŸ“ Document Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ File Upload/Download<br/>â€¢ Pre-signed URLs<br/>â€¢ Version Control"]
            NotificationSvc["ğŸ”” Notification Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Email Notifications<br/>â€¢ SMS Alerts<br/>â€¢ Push Notifications"]
            ConfigSvc["âš™ï¸ Config Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Feature Flags<br/>â€¢ Tenant Settings<br/>â€¢ System Configuration"]
        end
        
        subgraph AIServices["ğŸ¤– AI/ML Services"]
            direction LR
            ResumeParser["ğŸ“„ Resume Parser<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ PDF/DOCX Extraction<br/>â€¢ NLP Processing<br/>â€¢ Skills Extraction"]
            CandidateRanking["ğŸ“ˆ Ranking Service<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Job-Candidate Match<br/>â€¢ Scoring Algorithm<br/>â€¢ Recommendations"]
            BotInterview["ğŸ™ï¸ Interview Bot<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Conversational AI<br/>â€¢ Question Generation<br/>â€¢ Response Evaluation"]
            VoiceAnalysis["ğŸ¤ Voice Analysis<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Speech-to-Text<br/>â€¢ Sentiment Analysis<br/>â€¢ Transcription"]
        end
    end

    subgraph Infrastructure["ğŸ—„ï¸ Infrastructure Layer"]
        direction TB
        
        subgraph DataLayer["ğŸ’¾ Database"]
            MongoDB["MongoDB (Multi-Tenant)<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> Cosmos DB (MongoDB API)<br/>â˜ï¸ <b>AWS:</b> DocumentDB / MongoDB Atlas<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Schema-per-Tenant Isolation<br/>â€¢ tenant_001_db<br/>â€¢ tenant_002_db<br/>â€¢ tenant_003_db"]
        end
        
        subgraph CacheLayer["âš¡ Cache"]
            Redis["Redis Cache<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> Azure Cache for Redis<br/>â˜ï¸ <b>AWS:</b> ElastiCache (Redis)<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Session Store<br/>â€¢ API Response Cache<br/>â€¢ Rate Limit Counters"]
        end
        
        subgraph StorageLayer["â˜ï¸ Object Storage"]
            BlobStorage["File Storage<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> Blob Storage<br/>â˜ï¸ <b>AWS:</b> S3<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Resumes & Documents<br/>â€¢ Profile Images<br/>â€¢ Interview Recordings"]
        end
        
        subgraph MessageQueue["ğŸ“¨ Message Broker"]
            Kafka["Apache Kafka<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> Event Hubs (Kafka API)<br/>â˜ï¸ <b>AWS:</b> MSK (Managed Kafka)<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Async Processing<br/>â€¢ Event-Driven Communication<br/>â€¢ Parallel Processing<br/>â€¢ Decoupled Services"]
        end
    end

    subgraph Observability["ğŸ“Š Observability Stack"]
        direction LR
        ObsStack["Monitoring & Logging<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> Monitor + App Insights + Log Analytics<br/>â˜ï¸ <b>AWS:</b> CloudWatch + X-Ray<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Centralized Logging<br/>â€¢ Metrics & Dashboards<br/>â€¢ Distributed Tracing<br/>â€¢ Alerting"]
    end

    subgraph Email["ğŸ“§ Email Service"]
        EmailSvc["Transactional Email<br/>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•<br/>â˜ï¸ <b>Azure:</b> Communication Services<br/>â˜ï¸ <b>AWS:</b> SES<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>â€¢ Application Notifications<br/>â€¢ Interview Invites<br/>â€¢ Offer Letters"]
    end

    %% Connections
    Clients --> IDP
    IDP --> Gateway
    Clients --> Gateway
    
    Gateway --> BusinessServices
    Gateway --> TechnicalServices
    Gateway --> AIServices
    
    BusinessServices --> MongoDB
    TechnicalServices --> MongoDB
    AIServices --> MongoDB
    
    BusinessServices --> Redis
    TechnicalServices --> Redis
    Gateway --> Redis
    
    DocMgmtSvc --> BlobStorage
    AIServices --> BlobStorage
    
    %% Kafka connections (async communication)
    BusinessServices <-.->|"async events"| Kafka
    TechnicalServices <-.->|"async events"| Kafka
    AIServices <-.->|"async events"| Kafka
    
    NotificationSvc --> EmailSvc
    
    Services --> ObsStack

    %% Styling
    classDef clientStyle fill:#DBEAFE,stroke:#2563EB,stroke-width:2px,color:#1E3A8A
    classDef idpStyle fill:#FEF3C7,stroke:#D97706,stroke-width:2px,color:#92400E
    classDef gatewayStyle fill:#D1FAE5,stroke:#059669,stroke-width:2px,color:#065F46
    classDef businessStyle fill:#EDE9FE,stroke:#7C3AED,stroke-width:2px,color:#5B21B6
    classDef techStyle fill:#FEE2E2,stroke:#DC2626,stroke-width:2px,color:#991B1B
    classDef aiStyle fill:#CFFAFE,stroke:#0891B2,stroke-width:2px,color:#155E75
    classDef dataStyle fill:#F3F4F6,stroke:#4B5563,stroke-width:2px,color:#1F2937
    classDef kafkaStyle fill:#FFF7ED,stroke:#EA580C,stroke-width:2px,color:#9A3412
    classDef obsStyle fill:#FCE7F3,stroke:#DB2777,stroke-width:2px,color:#9D174D
    
    class WebApp,MobileApp,ThirdParty clientStyle
    class IdPService idpStyle
    class GatewayService gatewayStyle
    class CandidateSvc,RecruiterSvc businessStyle
    class TenantSvc,DocMgmtSvc,NotificationSvc,ConfigSvc techStyle
    class ResumeParser,CandidateRanking,BotInterview,VoiceAnalysis aiStyle
    class MongoDB,Redis,BlobStorage dataStyle
    class Kafka kafkaStyle
    class ObsStack,EmailSvc obsStyle
